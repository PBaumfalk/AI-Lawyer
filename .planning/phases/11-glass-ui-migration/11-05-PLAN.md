---
phase: 11-glass-ui-migration
plan: 05
type: execute
wave: 3
depends_on:
  - 11-02
  - 11-03
files_modified:
  - src/app/(dashboard)/kontakte/page.tsx
  - src/app/(dashboard)/kontakte/[id]/page.tsx
  - src/app/(dashboard)/kontakte/[id]/bearbeiten/page.tsx
  - src/app/(dashboard)/kontakte/neu/page.tsx
  - src/components/kontakte/kontakt-form.tsx
  - src/components/kontakte/kontakte-toolbar.tsx
  - src/app/(dashboard)/dokumente/page.tsx
  - src/app/(dashboard)/email/page.tsx
  - src/app/(dashboard)/email/[id]/page.tsx
  - src/app/(dashboard)/ki-chat/page.tsx
  - src/app/(dashboard)/ki-entwuerfe/page.tsx
  - src/app/(dashboard)/ki-entwuerfe/[id]/page.tsx
autonomous: true
requirements:
  - UI-01
  - UI-02
  - UI-03

must_haves:
  truths:
    - "Kontakte-Liste wraps list table in glass-panel"
    - "Kontakt-Detail page uses glass-card sections"
    - "Kontakt form pages wrap all form sections in glass-panel"
    - "Dokumente-Liste page list/table in glass-panel"
    - "Email inbox 3-pane layout uses glass-panel for each pane"
    - "KI-Chat page has glass-panel message container"
    - "KI-Entwuerfe list and detail pages use glass-panel/glass-card"
    - "All form inputs on these pages have glass-input styling (via Input component from Plan 03)"
  artifacts:
    - path: "src/app/(dashboard)/kontakte/page.tsx"
      provides: "Kontakte list in glass-panel with glass-input search"
    - path: "src/app/(dashboard)/kontakte/neu/page.tsx"
      provides: "Kontakt-Neu form in glass-panel sections"
    - path: "src/app/(dashboard)/dokumente/page.tsx"
      provides: "Dokumente list in glass-panel"
    - path: "src/app/(dashboard)/email/page.tsx"
      provides: "Email inbox with glass-panel panes"
    - path: "src/app/(dashboard)/ki-chat/page.tsx"
      provides: "KI-Chat with glass-panel message area"
  key_links:
    - from: "src/components/kontakte/kontakt-form.tsx"
      to: "src/components/ui/input.tsx"
      via: "Input component (glass-input auto-applied from Plan 03)"
      pattern: "import.*Input"
    - from: "src/app/(dashboard)/email/page.tsx"
      to: "src/components/ui/glass-panel.tsx"
      via: "GlassPanel wrapping email list and email viewer panes"
      pattern: "GlassPanel"
---

<objective>
Migrate Kontakte, Dokumente, Email, and KI pages to the glass design language. Apply glass-panel/glass-card to all section containers. All form inputs auto-inherit glass-input from Plan 03 upgrades.

Purpose: These pages cover the core data-entry and communication workflows. Making them visually consistent with the glass system completes requirements UI-02 (form pages) and UI-03 (list pages) for these modules.
Output: Kontakte, Dokumente, Email inbox, KI-Chat, KI-Entwuerfe pages with consistent glass design.
</objective>

<execution_context>
@/Users/patrickbaumfalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrickbaumfalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/11-glass-ui-migration/11-CONTEXT.md
@.planning/phases/11-glass-ui-migration/11-03-SUMMARY.md

<interfaces>
<!-- Glass design pattern for list pages: -->
<!-- <div className="space-y-4"> -->
<!--   <div className="flex items-center gap-3"> {toolbar/search} </div> -->
<!--   <GlassPanel elevation="panel" className="overflow-hidden rounded-xl"> -->
<!--     <table>...</table> or <div className="divide-y divide-[var(--glass-border-color)]">...</div> -->
<!--   </GlassPanel> -->
<!-- </div> -->

<!-- Glass design pattern for detail/form pages: -->
<!-- <div className="max-w-3xl mx-auto space-y-6"> -->
<!--   <h1 className="text-2xl font-semibold text-foreground">Heading</h1> -->
<!--   <GlassPanel elevation="panel" className="p-6 space-y-4"> -->
<!--     {form section content} -->
<!--   </GlassPanel> -->
<!--   <GlassPanel elevation="panel" className="p-6 space-y-4"> -->
<!--     {next form section} -->
<!--   </GlassPanel> -->
<!-- </div> -->

<!-- Email 3-pane layout: -->
<!-- <div className="flex gap-4 h-[calc(100vh-8rem)]"> -->
<!--   <GlassPanel elevation="panel" className="w-72 overflow-y-auto"> {email list} </GlassPanel> -->
<!--   <GlassPanel elevation="panel" className="flex-1"> {email viewer} </GlassPanel> -->
<!-- </div> -->

<!-- KI-Chat message area: -->
<!-- <GlassPanel elevation="panel" className="flex flex-col h-[calc(100vh-10rem)]"> -->
<!--   <div className="flex-1 overflow-y-auto p-4 space-y-3"> {messages} </div> -->
<!--   <div className="border-t border-[var(--glass-border-color)] p-4"> {input area} </div> -->
<!-- </GlassPanel> -->

<!-- ALL <Input> components on these pages auto-get glass-input from Plan 03 -->
<!-- ALL <Button> components auto-get Motion spring from Plan 03 -->
<!-- Replace font-heading with font-semibold on all headings -->
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Kontakte pages and components</name>
  <files>
    src/app/(dashboard)/kontakte/page.tsx
    src/app/(dashboard)/kontakte/[id]/page.tsx
    src/app/(dashboard)/kontakte/[id]/bearbeiten/page.tsx
    src/app/(dashboard)/kontakte/neu/page.tsx
    src/components/kontakte/kontakt-form.tsx
    src/components/kontakte/kontakte-toolbar.tsx
  </files>
  <action>
    Read each file before editing. Apply glass design patterns.

    **src/app/(dashboard)/kontakte/page.tsx (Kontakte-Liste):**
    - Outer: `<div className="space-y-4">` + h1 `font-semibold`
    - Import: `import { GlassPanel } from "@/components/ui/glass-panel"`
    - Wrap list/table in: `<GlassPanel elevation="panel" className="overflow-hidden rounded-xl">`
    - Any kontakte-toolbar or filter bar → wrap in `<div className="glass-card rounded-xl p-3">`
    - CSS stagger for list items (max 10 items with `.list-item-in` class, rest instant)

    **src/app/(dashboard)/kontakte/[id]/page.tsx (Kontakt-Detail):**
    - Outer: `<div className="space-y-6 max-w-4xl">`
    - Contact info card: `<GlassCard variant="elevated">` or `<GlassPanel elevation="elevated">`
    - Each section (Stammdaten, Adressen, Rechtliches, etc.) → `<GlassPanel elevation="panel" className="p-6">`
    - Remove any `bg-white dark:bg-gray-900` or `bg-card` from section containers
    - Replace `font-heading` with `font-semibold` on headings

    **src/app/(dashboard)/kontakte/[id]/bearbeiten/page.tsx (Kontakt bearbeiten):**
    - Same pattern as kontakt/neu — wrap form sections in GlassPanel
    - `<div className="max-w-3xl mx-auto space-y-6">`

    **src/app/(dashboard)/kontakte/neu/page.tsx (Kontakt neu):**
    - `<div className="max-w-3xl mx-auto space-y-6">`
    - `<h1 className="text-2xl font-semibold text-foreground">Kontakt anlegen</h1>`
    - Wrap KontaktForm or form sections in GlassPanel

    **src/components/kontakte/kontakt-form.tsx (shared form component):**
    Read the file. This component likely has fieldset/section dividers.
    - Wrap each logical section (Stammdaten, Adresse, Rechtliches, Intern) in:
      `<div className="glass-card rounded-xl p-5 space-y-4">` with a section heading.
    - All `<Input>`, `<Select>`, `<Textarea>` already auto-get glass-input from Plan 03.
    - Labels: add class `"text-sm font-medium text-foreground"` if not present.
    - Remove any `border border-gray-200`, `bg-white` from form wrapper divs.

    **src/components/kontakte/kontakte-toolbar.tsx:**
    Read the file. Contains search/filter controls.
    - Wrap toolbar in `<div className="glass-card rounded-xl p-3 flex items-center gap-3">`.
    - Search Input already has glass-input from Plan 03.
    - Filter buttons are Button components → already have Motion spring.
  </action>
  <verify>
    Visit /kontakte — list in glass panel. Visit /kontakte/neu — form sections in glass panels. Visit /kontakte/[id] — detail sections in glass cards. All inputs have glass-input styling. No TS errors for modified files.
  </verify>
  <done>Kontakte-Liste in GlassPanel. Kontakt-Detail sections in glass-card/glass-panel. Kontakt-Neu + Bearbeiten form sections in GlassPanel. KontaktForm component sections in glass-card. No TS errors.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Dokumente list, Email inbox, KI-Chat, and KI-Entwuerfe pages</name>
  <files>
    src/app/(dashboard)/dokumente/page.tsx
    src/app/(dashboard)/email/page.tsx
    src/app/(dashboard)/email/[id]/page.tsx
    src/app/(dashboard)/ki-chat/page.tsx
    src/app/(dashboard)/ki-entwuerfe/page.tsx
    src/app/(dashboard)/ki-entwuerfe/[id]/page.tsx
  </files>
  <action>
    Read each file before editing.

    **src/app/(dashboard)/dokumente/page.tsx (Dokumente-Liste):**
    - Outer: `<div className="space-y-4">`
    - Import GlassPanel. Wrap the document list/table in:
      `<GlassPanel elevation="panel" className="overflow-hidden rounded-xl">`
    - Any filter/upload bar area → `<div className="glass-card rounded-xl p-3">`
    - If file list has items: add stagger CSS animation (max 10 with `.list-item-in`)
    - Replace `font-heading` → `font-semibold` on headings
    - Remove any `bg-white`, `bg-card`, `shadow-sm` from containers (glass-panel provides visual depth)

    **src/app/(dashboard)/email/page.tsx (Email-Inbox):**
    - Email uses a multi-pane layout. The email layout file (`src/app/(dashboard)/email/layout.tsx`) may define the shell — read it first.
    - The inbox page: wrap the email list pane in `<GlassPanel elevation="panel" className="overflow-y-auto">`.
    - If there's a 3-pane structure (folder list | email list | viewer):
      ```tsx
      <div className="flex gap-3 h-[calc(100vh-7rem)]">
        <GlassPanel elevation="card" className="w-48 overflow-y-auto p-2"> {folders} </GlassPanel>
        <GlassPanel elevation="panel" className="w-72 overflow-y-auto"> {email list} </GlassPanel>
        <GlassPanel elevation="panel" className="flex-1 overflow-y-auto"> {email viewer} </GlassPanel>
      </div>
      ```
    - Email list items: add CSS stagger animation, max 10 items.
    - Compose button: already a Button → gets Motion spring from Plan 03.

    **src/app/(dashboard)/email/[id]/page.tsx (Email detail view):**
    - Email header/metadata: `<GlassCard variant="elevated" className="p-5">`
    - Email body content: `<GlassPanel elevation="panel" className="p-6">`
    - Actions (Reply, Forward): Button components → already Motion-enabled.

    **src/app/(dashboard)/ki-chat/page.tsx (Helena KI-Chat):**
    This is likely a chat interface. The layout file may already set up the shell.
    - Message container: `<GlassPanel elevation="panel" className="flex flex-col h-[calc(100vh-10rem)] overflow-hidden">`
    - Messages scroll area: `<div className="flex-1 overflow-y-auto p-4 space-y-3">`
    - Each message bubble: `<div className="glass-card rounded-2xl px-4 py-3 max-w-[80%]">` (user) and `<div className="glass-input rounded-2xl px-4 py-3 max-w-[80%]">` (assistant)
    - Input area: `<div className="border-t border-[var(--glass-border-color)] p-4">`
    - If there's a chat input → already glass-input from Plan 03.
    - Remove any hardcoded `bg-slate-900` or `bg-gray-100` from message containers.

    **src/app/(dashboard)/ki-entwuerfe/page.tsx (KI-Entwuerfe Liste):**
    - List of AI drafts: wrap in `<GlassPanel elevation="panel" className="overflow-hidden rounded-xl">`
    - Each draft card in the list: `<div className="glass-card rounded-xl p-4">` with hover effect.
    - Add CSS stagger animation for draft items (max 10).
    - "Neuer Entwurf" button: already Motion-enabled via Button.

    **src/app/(dashboard)/ki-entwuerfe/[id]/page.tsx (KI-Entwurf Detail):**
    - Draft content area: `<GlassPanel elevation="elevated" className="p-6">`
    - Metadata/actions sidebar (if present): `<GlassCard variant="elevated" className="p-4">`
    - Any form fields for editing the draft: auto-get glass-input via Input component.
  </action>
  <verify>
    Visit /dokumente — list in glass panel. Visit /email — inbox panes use glass. Visit /ki-chat — chat message area in glass panel. Visit /ki-entwuerfe — draft list in glass. No TS errors for modified files (`npx tsc --noEmit`).
  </verify>
  <done>Dokumente-Liste in GlassPanel. Email inbox panes in GlassPanel. KI-Chat message container in GlassPanel. KI-Entwuerfe list in GlassPanel. KI-Entwurf detail in GlassPanel-elevated. No TS errors.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` — zero errors across all modified files
2. Visual /kontakte: list table in glass panel, search input has frosted glass background
3. Visual /kontakte/neu: form sections visually separated in glass panels
4. Visual /email: inbox panes have glass backdrop-blur effect
5. Visual /ki-chat: chat messages float in glass container
6. Visual /ki-entwuerfe: drafts listed in glass card style
7. Dark mode: all pages switch cleanly (no hard-coded light colors)
</verification>

<success_criteria>
- Kontakte: list in GlassPanel, detail sections in glass-card/glass-panel, form sections in GlassPanel
- Dokumente: list in GlassPanel with stagger CSS animation
- Email: multi-pane in GlassPanel containers, email viewer in glass
- KI-Chat: message area in GlassPanel, message bubbles in glass-card/glass-input
- KI-Entwuerfe: list in GlassPanel, detail in glass-panel-elevated
- Zero TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/11-glass-ui-migration/11-05-SUMMARY.md`
</output>
