---
phase: 11-glass-ui-migration
plan: 06
type: execute
wave: 3
depends_on:
  - 11-02
  - 11-03
files_modified:
  - src/app/(dashboard)/finanzen/page.tsx
  - src/app/(dashboard)/finanzen/aktenkonto/page.tsx
  - src/app/(dashboard)/finanzen/rechner/page.tsx
  - src/app/(dashboard)/finanzen/rechnungen/page.tsx
  - src/app/(dashboard)/finanzen/rechnungen/[id]/page.tsx
  - src/app/(dashboard)/kalender/page.tsx
  - src/app/(dashboard)/tickets/page.tsx
  - src/app/(dashboard)/tickets/[id]/page.tsx
  - src/app/(dashboard)/tickets/neu/page.tsx
  - src/app/(dashboard)/bea/page.tsx
  - src/app/(dashboard)/bea/[id]/page.tsx
  - src/app/(dashboard)/nachrichten/page.tsx
  - src/app/(dashboard)/einstellungen/page.tsx
  - src/app/(dashboard)/einstellungen/email/page.tsx
  - src/app/(dashboard)/einstellungen/ki/page.tsx
  - src/app/(dashboard)/einstellungen/vorlagen/page.tsx
  - src/app/(dashboard)/einstellungen/dokument-tags/page.tsx
  - src/app/(dashboard)/admin/jobs/page.tsx
  - src/app/(dashboard)/admin/system/page.tsx
  - src/app/(dashboard)/admin/pipeline/page.tsx
  - src/app/(dashboard)/admin/dezernate/page.tsx
  - src/app/(dashboard)/admin/rollen/page.tsx
  - src/app/(dashboard)/admin/settings/page.tsx
  - src/app/(dashboard)/suche/page.tsx
  - src/app/(dashboard)/vorlagen/page.tsx
autonomous: true
requirements:
  - UI-01
  - UI-02
  - UI-03

must_haves:
  truths:
    - "Finanzen pages (overview, aktenkonto, rechnungen, rechner) use glass-panel for main content sections"
    - "Kalender page calendar container in glass-panel"
    - "Tickets list and detail use glass-panel/glass-card"
    - "Ticket-Neu form uses glass-panel sections"
    - "beA inbox and detail use glass-panel/glass-card"
    - "Einstellungen pages wrap each settings section in glass-card"
    - "Admin pages wrap all content in glass-panel"
    - "No page has a raw white/bg-card container where glass should be"
    - "All inputs on settings/form pages have glass-input styling"
  artifacts:
    - path: "src/app/(dashboard)/finanzen/page.tsx"
      provides: "Finanzen overview in glass-panel sections"
    - path: "src/app/(dashboard)/kalender/page.tsx"
      provides: "Kalender in glass-panel container"
    - path: "src/app/(dashboard)/tickets/page.tsx"
      provides: "Tickets list in glass-panel"
    - path: "src/app/(dashboard)/einstellungen/page.tsx"
      provides: "Settings sections in glass-card"
    - path: "src/app/(dashboard)/admin/jobs/page.tsx"
      provides: "Admin pages in glass-panel"
  key_links:
    - from: "src/app/(dashboard)/finanzen/rechnungen/page.tsx"
      to: "src/components/ui/glass-panel.tsx"
      via: "GlassPanel wrapping invoice table"
      pattern: "GlassPanel"
    - from: "src/app/(dashboard)/einstellungen/page.tsx"
      to: "src/components/ui/glass-card.tsx"
      via: "GlassCard wrapping each settings section"
      pattern: "GlassCard"
---

<objective>
Migrate the remaining pages to the glass design language: Finanzen module (5 pages), Kalender, Tickets (3 pages), beA inbox, Nachrichten, Einstellungen (5 pages), Admin pages (6 pages), Suche, and Vorlagen. Apply glass-panel/glass-card to all content containers. This completes full glass coverage across the application.

Purpose: Final sweep to ensure no page breaks the glass design language. Completing this plan satisfies all three UI requirements (UI-01, UI-02, UI-03) in full.
Output: All remaining pages using consistent glass design system. Phase 11 complete.
</objective>

<execution_context>
@/Users/patrickbaumfalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrickbaumfalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/11-glass-ui-migration/11-CONTEXT.md
@.planning/phases/11-glass-ui-migration/11-03-SUMMARY.md

<interfaces>
<!-- Standard page pattern (apply to ALL pages in this plan): -->
<!--   1. Outer div: <div className="space-y-6"> -->
<!--   2. Page heading: <h1 className="text-2xl font-semibold text-foreground">Title</h1> -->
<!--   3. Content sections: <GlassPanel elevation="panel" className="p-6"> or <GlassCard> -->
<!--   4. Tables/lists: <GlassPanel elevation="panel" className="overflow-hidden rounded-xl"> -->
<!--   5. Filter/toolbar bars: <div className="glass-card rounded-xl p-3 flex items-center gap-3"> -->
<!--   6. All <Input>/<Select>/<Textarea> auto-get glass-input (already in Plan 03) -->
<!--   7. Replace: font-heading → font-semibold -->
<!--   8. Remove: bg-white, bg-card, shadow-sm from container divs -->
<!--   9. CSS stagger for list items (max 10): style={{ animationDelay: `${i*50}ms` }} + class list-item-in -->

<!-- Finance-specific: -->
<!-- KPI tiles/overview cards → <GlassKpiCard> or <GlassCard className="p-5"> -->
<!-- Ledger/table rows → dividing line: divide-y divide-[var(--glass-border-color)] -->

<!-- Calendar-specific: -->
<!-- Most calendar libraries (react-big-calendar, FullCalendar) render their own DOM -->
<!-- Wrap the calendar container in GlassPanel. May need custom CSS to remove lib's default white bg -->
<!-- Add: .rbc-calendar { background: transparent !important; } or similar override in globals.css -->

<!-- Settings pages — specific pattern: -->
<!-- Each settings SECTION (e.g., "E-Mail-Konto", "KI-Einstellungen") = one GlassCard -->
<!-- Section heading: <h2 className="text-base font-semibold text-foreground mb-4"> -->
<!-- Divider between form fields: <div className="border-t border-[var(--glass-border-color)] my-4"> -->

<!-- Admin pages — treat like list pages: -->
<!-- Job monitor, system status: treat as dashboard-style with glass-kpi-card for metrics -->
<!-- Table of jobs/users/roles: wrap in GlassPanel -->
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Finanzen, Kalender, Tickets, beA, Nachrichten, Suche, Vorlagen</name>
  <files>
    src/app/(dashboard)/finanzen/page.tsx
    src/app/(dashboard)/finanzen/aktenkonto/page.tsx
    src/app/(dashboard)/finanzen/rechner/page.tsx
    src/app/(dashboard)/finanzen/rechnungen/page.tsx
    src/app/(dashboard)/finanzen/rechnungen/[id]/page.tsx
    src/app/(dashboard)/kalender/page.tsx
    src/app/(dashboard)/tickets/page.tsx
    src/app/(dashboard)/tickets/[id]/page.tsx
    src/app/(dashboard)/tickets/neu/page.tsx
    src/app/(dashboard)/bea/page.tsx
    src/app/(dashboard)/bea/[id]/page.tsx
    src/app/(dashboard)/nachrichten/page.tsx
    src/app/(dashboard)/suche/page.tsx
    src/app/(dashboard)/vorlagen/page.tsx
  </files>
  <action>
    Read each file before editing. Apply the standard glass design pattern described in the interfaces block.

    **Finanzen pages (5 files):**

    `finanzen/page.tsx` (overview): Wrap overview KPI section in grid + GlassKpiCard tiles if not already. Main stats table/list → GlassPanel. Navigation to sub-pages (Aktenkonto, Rechnungen, etc.) → could be glass-card chip links.

    `finanzen/aktenkonto/page.tsx`: Ledger/transaction table → GlassPanel with `overflow-hidden rounded-xl`. Table rows use `divide-y divide-[var(--glass-border-color)]`. Balance summary bar at top → `<GlassCard className="p-4">`.

    `finanzen/rechner/page.tsx` (RVG calculator): This is likely a form-heavy page. Wrap calculator sections in GlassPanel. Input groups in glass-card dividers. Result display: `<GlassCard variant="elevated" className="p-5">` with large font for the calculated amount.

    `finanzen/rechnungen/page.tsx` (invoice list): Invoice table → GlassPanel. Status badges stay as-is. Toolbar with filters → glass-card wrapper.

    `finanzen/rechnungen/[id]/page.tsx` (invoice detail): Header info (client, amount, dates) → GlassCard. Line items table → GlassPanel. Action buttons at bottom → no change (already Button components).

    **Kalender (`kalender/page.tsx`):**
    Read the file. If it uses a calendar library (react-big-calendar or similar):
    - Wrap with: `<GlassPanel elevation="panel" className="overflow-hidden rounded-xl p-4">`
    - Add inline CSS override or className to remove library's white background:
      In globals.css or as `<style>` tag: `.rbc-calendar, .fc { background: transparent !important; }`
      (exact class depends on library — check the file)
    - Calendar header/toolbar from the library: may need `bg-transparent` override
    - If custom calendar component: standard glass-panel wrapper applies.

    **Tickets pages (3 files):**

    `tickets/page.tsx` (list): Wrap ticket list in GlassPanel. Ticket rows with priority badges stay as-is. Add CSS stagger animation (max 10 items).

    `tickets/[id]/page.tsx` (detail): Ticket description/content → `<GlassPanel elevation="panel" className="p-6">`. Ticket metadata sidebar → `<GlassCard className="p-4">`. Comments/timeline → `<GlassCard className="p-5">`.

    `tickets/neu/page.tsx` (create form): Already partially uses glass (had some glass from existing code). Ensure each form section wrapped in `<GlassPanel elevation="panel" className="p-6 space-y-4">`. Input, Select, Textarea → auto-get glass-input from Plan 03.

    **beA pages (2 files):**

    `bea/page.tsx` (inbox): beA is the legal electronic mailbox. List of beA messages → GlassPanel. Message list items get stagger animation. Toolbar → glass-card.

    `bea/[id]/page.tsx` (message detail): Message header → GlassCard. Message content → GlassPanel. Attachment list → GlassCard. Reply/forward section → GlassCard with glass-input textarea.

    **Nachrichten (`nachrichten/page.tsx`):** Internal messaging. Similar to chat UI. Channel list sidebar → GlassCard. Message area → GlassPanel. Input → auto-glass-input.

    **Suche (`suche/page.tsx`):** Search results page. Results list → GlassPanel. Each result card → `<div className="glass-card rounded-xl p-4">`. Search input at top → glass-input (auto from Input component).

    **Vorlagen (`vorlagen/page.tsx`):** Document templates list. Template grid/list → GlassPanel. Each template card → `<div className="glass-card rounded-xl p-4 hover:glass-panel transition-all">`. Create template button → Button (already Motion-enabled).
  </action>
  <verify>
    Visit 3-4 of these pages visually. All main content containers show glass backdrop-blur. No hard-coded white backgrounds visible. `npx tsc --noEmit` — no errors.
  </verify>
  <done>Finanzen (5 pages), Kalender, Tickets (3 pages), beA (2 pages), Nachrichten, Suche, Vorlagen all use glass-panel/glass-card for main content. No TS errors.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Einstellungen and Admin pages</name>
  <files>
    src/app/(dashboard)/einstellungen/page.tsx
    src/app/(dashboard)/einstellungen/email/page.tsx
    src/app/(dashboard)/einstellungen/ki/page.tsx
    src/app/(dashboard)/einstellungen/vorlagen/page.tsx
    src/app/(dashboard)/einstellungen/dokument-tags/page.tsx
    src/app/(dashboard)/admin/jobs/page.tsx
    src/app/(dashboard)/admin/system/page.tsx
    src/app/(dashboard)/admin/pipeline/page.tsx
    src/app/(dashboard)/admin/dezernate/page.tsx
    src/app/(dashboard)/admin/rollen/page.tsx
    src/app/(dashboard)/admin/settings/page.tsx
  </files>
  <action>
    Read each file before editing.

    **Einstellungen pages (5 files):**
    Settings pages already use some glass (noted in existing pages list). Standardize:

    `einstellungen/page.tsx` (main settings): This is the settings hub.
    - Replace any raw `<div className="border rounded-lg p-6">` with `<GlassCard className="p-6">`.
    - Section headings → `<h2 className="text-base font-semibold text-foreground mb-4">`.
    - Settings rows (label + control pairs) → keep internal layout, just wrap the section card.
    - Remove any `bg-white dark:bg-gray-800` from section wrappers.

    `einstellungen/email/page.tsx`: Email account settings.
    - Form for IMAP/SMTP credentials → wrap in `<GlassPanel elevation="panel" className="p-6 space-y-4">`.
    - Section heading: "E-Mail-Konto konfigurieren" → font-semibold.
    - All Input fields → auto-get glass-input from Plan 03.
    - Test connection button → already Button → Motion spring.

    `einstellungen/ki/page.tsx`: KI/AI settings.
    - Model selector, API key fields → wrap in GlassPanel.
    - Model selection (if radio/card style) → each option in `<div className="glass-card rounded-xl p-4 cursor-pointer">`.

    `einstellungen/vorlagen/page.tsx` and `einstellungen/dokument-tags/page.tsx`:
    - List of items → wrap in GlassPanel.
    - Form for adding new item → wrap in GlassCard.
    - Inline edit fields → glass-input via Input component.

    **Admin pages (6 files):**
    Admin pages are less frequently used but must be consistent. Apply standard pattern:

    `admin/jobs/page.tsx` (Job monitor): If it shows a job queue table → GlassPanel. If it has status tiles → GlassKpiCard style. Running/failed/queued counts → glass-card chips.

    `admin/system/page.tsx` (System status): Docker service status cards → GlassCard per service. Status indicators (green/red) stay as-is. System info table → GlassPanel.

    `admin/pipeline/page.tsx` (Pipeline): Pipeline step list or status → GlassPanel. Each step → glass-card row.

    `admin/dezernate/page.tsx` (Departments): Dezernate list → GlassPanel. Add/edit dezernate form → GlassCard with form fields.

    `admin/rollen/page.tsx` (Roles): User roles management table → GlassPanel. Role assignment UI → glass-card rows.

    `admin/settings/page.tsx` (System settings): Same pattern as einstellungen pages — each settings section → GlassCard.

    **General rule for all admin pages:**
    - Import: `import { GlassPanel } from "@/components/ui/glass-panel"` and `import { GlassCard } from "@/components/ui/glass-card"`
    - Replace: any `className="rounded-lg border bg-card p-6"` → `<GlassCard className="p-6">`
    - Replace: any `className="rounded-lg border"` table wrapper → `<GlassPanel elevation="panel" className="overflow-hidden">`
    - Replace: `font-heading` → `font-semibold`
    - Admin-specific label "ADMINISTRATION" in sidebar is already styled (from Plan 02) — no change here.
  </action>
  <verify>
    Visit /einstellungen — settings sections in glass-card. Visit /einstellungen/email — email form in glass-panel. Visit /admin/jobs — job table in glass-panel. Visit /admin/system — status cards in glass-card. `npx tsc --noEmit` — zero errors.
  </verify>
  <done>All 5 Einstellungen pages and 6 Admin pages use glass-card/glass-panel for content sections. All form inputs auto-get glass-input. Font headings replaced. No TS errors.</done>
</task>

</tasks>

<verification>
Overall phase completion check:
1. `npx tsc --noEmit` — zero TypeScript errors across entire project
2. `grep -r "bg-white\|bg-card\|bg-gray-900\|bg-slate-900" src/app --include="*.tsx" | grep -v "dark:\|/\/" | wc -l` — approaching 0 (residual in utility classes is acceptable)
3. `grep -r "font-heading" src/app --include="*.tsx" | wc -l` — approaching 0 (replaced with font-semibold)
4. Visual: Every page in sidebar navigation shows glass-panel design
5. Visual: Dark mode toggle in sidebar switches ALL pages to dark mode correctly
6. Visual: Both light and dark modes look intentional and polished (no jarring contrasts)
7. Visual: Gradient mesh background visible through glass sidebar on all pages
</verification>

<success_criteria>
- All Finanzen pages (5): glass-panel for tables, glass-card for summary cards
- Kalender: calendar library wrapped in glass-panel
- Tickets (3 pages): list in glass-panel, detail in glass sections, form in glass-panel
- beA (2 pages): message list and detail in glass panels
- Nachrichten: chat UI in glass panels
- Suche + Vorlagen: results/cards in glass containers
- Einstellungen (5 pages): settings sections in glass-card
- Admin pages (6 pages): tables in glass-panel, status cards in glass-card
- Zero TypeScript errors project-wide
- Full dark mode coverage (both modes look polished)
</success_criteria>

<output>
After completion, create `.planning/phases/11-glass-ui-migration/11-06-SUMMARY.md`
</output>
