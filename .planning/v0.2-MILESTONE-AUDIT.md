---
milestone: v0.2
name: Helena Agent
audited: 2026-02-27T22:15:00Z
status: gaps_found
scores:
  requirements: 27/53
  phases: 5/8
  integration: 22/26
  flows: 4/6
gaps:
  phases:
    - id: "Phase 24"
      name: "Scanner + Alerts"
      status: "not_started"
      requirements: ["SCAN-01", "SCAN-02", "SCAN-03", "SCAN-04", "SCAN-05", "SCAN-06", "ALRT-02", "ALRT-03", "ALRT-04", "ALRT-05"]
    - id: "Phase 25"
      name: "Helena Memory"
      status: "not_started"
      requirements: ["MEM-02", "MEM-03", "MEM-04"]
    - id: "Phase 26"
      name: "Activity Feed UI + QA-Gates"
      status: "not_started"
      requirements: ["UI-01", "UI-02", "UI-03", "UI-04", "UI-05", "UI-06", "QA-01", "QA-02", "QA-03", "QA-04", "QA-05", "QA-06", "QA-07"]
  integration:
    - from: "at-mention-parser.ts"
      to: "Any API route"
      issue: "parseHelenaMention/hasHelenaMention exported but never called — @Helena trigger is unwired"
      affected_reqs: ["TASK-01"]
      severity: "critical"
    - from: "DraftPinnedSection"
      to: "Akte detail page"
      issue: "Component complete but never rendered — no mount point in Akte detail layout"
      affected_reqs: ["DRFT-03"]
      severity: "high"
    - from: "update-akte-rag.ts"
      to: "draft-notification.ts"
      issue: "HelenaDraft created without calling notifyDraftCreated — 5 of 6 write-tool sites wired"
      affected_reqs: ["DRFT-06"]
      severity: "medium"
    - from: "Schriftsatz pipeline"
      to: "User follow-up"
      issue: "Slot-filling Rueckfragen produced but user answers cannot be routed back — multi-turn stalls at needs_input"
      affected_reqs: ["ORCH-04"]
      severity: "medium"
  flows:
    - name: "@Helena mention → background task"
      breaks_at: "No API route calls hasHelenaMention/parseHelenaMention"
      affected_reqs: ["TASK-01"]
    - name: "Schriftsatz Rueckfrage → user answer → pipeline resume"
      breaks_at: "No userSlotValues routing in agent options or API endpoint"
      affected_reqs: ["ORCH-04"]
tech_debt: []
---

# v0.2 Helena Agent — Milestone Audit

**Audited:** 2026-02-27T22:15:00Z
**Status:** gaps_found
**Score:** 27/53 requirements satisfied (5/8 phases complete)

## Phase Verification Summary

| Phase | Name | Status | Score | Verification |
|-------|------|--------|-------|-------------|
| 19 | Schema Foundation | ✓ Passed | 8/8 | TASK-02, DRFT-01, ALRT-01, MEM-01 |
| 20 | Agent Tools + ReAct Loop | ✓ Passed | 6/6 | AGNT-01 to AGNT-06 |
| 21 | @Helena Task-System | ✓ Passed | 7/7 | TASK-01, TASK-03 to TASK-05, AGNT-07 |
| 22 | Schriftsatz Orchestrator | ✓ Passed | 5/5 | ORCH-01 to ORCH-07 |
| 23 | Draft-Approval Workflow | ✓ Passed | 5/5 | DRFT-02 to DRFT-06 |
| 24 | Scanner + Alerts | ✗ Not started | 0/0 | — |
| 25 | Helena Memory | ✗ Not started | 0/0 | — |
| 26 | Activity Feed UI + QA-Gates | ✗ Not started | 0/0 | — |

## Requirements Coverage (3-Source Cross-Reference)

### Satisfied Requirements (27)

| Requirement | Phase | VERIFICATION | SUMMARY | Traceability | Final |
|-------------|-------|-------------|---------|-------------|-------|
| AGNT-01 | 20 | passed | listed (20-02, 20-04) | Complete | **satisfied** |
| AGNT-02 | 20 | passed | listed (20-01, 20-04) | Complete | **satisfied** |
| AGNT-03 | 20 | passed | listed (20-01, 20-04) | Complete | **satisfied** |
| AGNT-04 | 20 | passed | listed (20-03, 20-04) | Complete | **satisfied** |
| AGNT-05 | 20 | passed | listed (20-03, 20-04) | Complete | **satisfied** |
| AGNT-06 | 20 | passed | listed (20-02, 20-04) | Complete | **satisfied** |
| AGNT-07 | 21 | passed | listed (21-01, 21-02) | Complete | **satisfied** |
| ORCH-01 | 22 | passed | listed (22-02) | Complete | **satisfied** |
| ORCH-02 | 22 | passed | listed (22-01) | Complete | **satisfied** |
| ORCH-03 | 22 | passed | listed (22-01) | Complete | **satisfied** |
| ORCH-04 | 22 | passed | listed (22-01) | Complete | **satisfied** |
| ORCH-05 | 22 | passed | listed (22-02) | Complete | **satisfied** |
| ORCH-06 | 22 | passed | listed (22-02) | Complete | **satisfied** |
| ORCH-07 | 22 | passed | listed (22-02) | Complete | **satisfied** |
| TASK-01 | 21 | passed | listed (21-01, 21-02) | Complete | **satisfied** |
| TASK-02 | 19 | passed | listed (19-01) | Complete | **satisfied** |
| TASK-03 | 21 | passed | listed (21-01) | Complete | **satisfied** |
| TASK-04 | 21 | passed | listed (21-01) | Complete | **satisfied** |
| TASK-05 | 21 | passed | listed (21-02) | Complete | **satisfied** |
| DRFT-01 | 19 | passed | listed (19-01) | Complete | **satisfied** |
| DRFT-02 | 23 | passed | listed (23-01) | Complete | **satisfied** |
| DRFT-03 | 23 | passed | listed (23-02) | Complete | **satisfied** |
| DRFT-04 | 23 | passed | listed (23-01) | Complete | **satisfied** |
| DRFT-05 | 23 | passed | listed (23-01) | Complete | **satisfied** |
| DRFT-06 | 23 | passed | listed (23-02, 23-03) | Complete | **satisfied** |
| ALRT-01 | 19 | passed | listed (19-01) | Complete | **satisfied** |
| MEM-01 | 19 | passed | listed (19-01) | Complete | **satisfied** |

### Unsatisfied Requirements (26) — Phases Not Started

| Requirement | Phase | Status | Reason |
|-------------|-------|--------|--------|
| SCAN-01 | 24 | unsatisfied | Phase not started |
| SCAN-02 | 24 | unsatisfied | Phase not started |
| SCAN-03 | 24 | unsatisfied | Phase not started |
| SCAN-04 | 24 | unsatisfied | Phase not started |
| SCAN-05 | 24 | unsatisfied | Phase not started |
| SCAN-06 | 24 | unsatisfied | Phase not started |
| ALRT-02 | 24 | unsatisfied | Phase not started |
| ALRT-03 | 24 | unsatisfied | Phase not started |
| ALRT-04 | 24 | unsatisfied | Phase not started |
| ALRT-05 | 24 | unsatisfied | Phase not started |
| MEM-02 | 25 | unsatisfied | Phase not started |
| MEM-03 | 25 | unsatisfied | Phase not started |
| MEM-04 | 25 | unsatisfied | Phase not started |
| QA-01 | 26 | unsatisfied | Phase not started |
| QA-02 | 26 | unsatisfied | Phase not started |
| QA-03 | 26 | unsatisfied | Phase not started |
| QA-04 | 26 | unsatisfied | Phase not started |
| QA-05 | 26 | unsatisfied | Phase not started |
| QA-06 | 26 | unsatisfied | Phase not started |
| QA-07 | 26 | unsatisfied | Phase not started |
| UI-01 | 26 | unsatisfied | Phase not started |
| UI-02 | 26 | unsatisfied | Phase not started |
| UI-03 | 26 | unsatisfied | Phase not started |
| UI-04 | 26 | unsatisfied | Phase not started |
| UI-05 | 26 | unsatisfied | Phase not started |
| UI-06 | 26 | unsatisfied | Phase not started |

## Cross-Phase Integration

### Wired (22 connections)

All major inter-phase connections verified:
- Phase 20 `runHelenaAgent` → Phase 21 `processHelenaTask` (WIRED)
- Phase 20 write tools → Phase 23 HelenaDraft lifecycle (WIRED)
- Phase 22 `runSchriftsatzPipeline` → Phase 20 agent routing (WIRED)
- Phase 23 `notifyDraftCreated` → 5/6 write tool creation sites (WIRED)
- Phase 23 `$extends` ENTWURF gate → all `prisma.dokument.create/update` (WIRED)
- Phase 23 draft API → draft-service functions (WIRED)

### Integration Issues (4)

**1. TASK-01 — @Helena mention parser unwired (Critical)**
`parseHelenaMention` and `hasHelenaMention` in `at-mention-parser.ts` have zero callers. The @Helena trigger for background tasks cannot be exercised from the UI. The entire downstream chain works (task-service → queue → processor → agent), but the entry point is disconnected.

**2. DRFT-03 — DraftPinnedSection not mounted (High)**
`DraftPinnedSection` component is complete but no Akte detail page renders it. Per-Akte draft visibility requires adding `<DraftPinnedSection akteId={akte.id} />` to the Akte detail layout. The global `/entwuerfe` inbox works.

**3. DRFT-06 — update-akte-rag.ts missing notification (Medium)**
`update-akte-rag.ts` creates HelenaDraft without calling `notifyDraftCreated`. 5 of 6 write-tool creation sites are wired; this one was missed.

**4. ORCH-04 — Schriftsatz Rueckfragen multi-turn broken (Medium)**
Slot-filling Rueckfragen are generated but user answers cannot be routed back to resume the pipeline. `userSlotValues` routing is not implemented in the agent options or any API endpoint.

## Broken E2E Flows (2)

**1. @Helena mention → background task**
Breaks at: No API route calls `hasHelenaMention`/`parseHelenaMention`
Impact: Users cannot trigger Helena tasks via @-mention in the UI

**2. Schriftsatz Rueckfrage → user answer → pipeline resume**
Breaks at: No `userSlotValues` routing in agent options or API endpoint
Impact: Multi-turn Schriftsatz queries that need slot-filling stall at `needs_input`

## Tech Debt

No tech debt items flagged across completed phases. All anti-pattern checks passed.

---

*Audited: 2026-02-27T22:15:00Z*
*Auditor: Claude (gsd-integration-checker + orchestrator)*
